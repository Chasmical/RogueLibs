"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2289],{5015:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var o=n(5893),s=n(1151);n(5878),n(1016),n(4996);const a={},r="Custom Unlocks",l={id:"dev/unlocks/custom-unlocks",title:"Custom Unlocks",description:"Custom unlocks allow your custom content to be accessed through vanilla menus. Unlike other hooks, unlocks persist throughout the game, and get destroyed and created only when initially loading the game or changing save slots. RogueLibs also creates wrappers around vanilla unlocks, to ensure the compatibility of your unlocks with the vanilla ones.",source:"@site/docs/dev/unlocks/custom-unlocks.mdx",sourceDirName:"dev/unlocks",slug:"/dev/unlocks/custom-unlocks",permalink:"/RogueLibs/docs/dev/unlocks/custom-unlocks",draft:!1,unlisted:!1,editUrl:"https://github.com/Chasmical/RogueLibs/edit/main/website/docs/dev/unlocks/custom-unlocks.mdx",tags:[],version:"current",frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Creating a Custom Disaster",permalink:"/RogueLibs/docs/dev/disasters/create-disaster"},next:{title:"Configuring Unlocks",permalink:"/RogueLibs/docs/dev/unlocks/configuring-unlocks"}},i={},u=[{value:"Unlock classes",id:"unlock-classes",level:2},{value:"Initialization",id:"initialization",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"custom-unlocks",children:"Custom Unlocks"}),"\n",(0,o.jsx)(t.p,{children:"Custom unlocks allow your custom content to be accessed through vanilla menus. Unlike other hooks, unlocks persist throughout the game, and get destroyed and created only when initially loading the game or changing save slots. RogueLibs also creates wrappers around vanilla unlocks, to ensure the compatibility of your unlocks with the vanilla ones."}),"\n","\n","\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"UnlockWrapper"})," is a flexible wrapper around a ",(0,o.jsx)(t.code,{children:"Unlock"})," class, and provides methods to get the unlock's name, description, image and other stuff. It is the base class for any and all custom or vanilla unlocks."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"DisplayedUnlock"})," derives from the ",(0,o.jsx)(t.code,{children:"UnlockWrapper"})," class. It provides methods to display the unlock in the in-game menus. You can alter or augment your unlock's name and description, and even use ",(0,o.jsx)(t.a,{href:"https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/StyledText.html",children:"Unity's rich text formatting"}),". Note, that all rich text formatting tags have to be closed (this was introduced in one of the Unity versions)."]}),"\n",(0,o.jsx)(t.admonition,{type:"caution",children:(0,o.jsxs)(t.p,{children:["You probably shouldn't implement ",(0,o.jsx)(t.code,{children:"UnlockWrapper"})," or ",(0,o.jsx)(t.code,{children:"DisplayedUnlock"})," directly. Use the classes described below."]})}),"\n",(0,o.jsx)(t.h2,{id:"unlock-classes",children:"Unlock classes"}),"\n",(0,o.jsx)(t.p,{children:"RogueLibs provides the following classes that you can derive from:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"ItemUnlock"})," - for items;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"AbilityUnlock"})," - for abilities;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"TraitUnlock"})," - for traits;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"MutatorUnlock"})," - for mutators;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"AgentUnlock"})," - for agents;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"BigQuestUnlock"})," - for agent Big Quests;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"ExtraUnlock"})," - for achievements and other stuff;"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"FloorUnlock"})," - for floor unlocks;"]}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsx)(t.p,{children:"There's also a couple of classes that are in RogueLibs only for compatibility reasons."})}),"\n",(0,o.jsx)(t.h2,{id:"initialization",children:"Initialization"}),"\n",(0,o.jsx)(t.p,{children:"You can initialize your unlocks like this:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomItem.cs"',children:'public class MyCustomItem : CustomItem\n{\n    [RLSetup]\n    public static void Setup()\n    {\n        RogueLibs.CreateCustomItem<MyCustomItem>()\n            .WithName(new CustomNameInfo("My Custom Item"))\n            .WithDescription(new CustomNameInfo("My Custom Item is very cool and does a lot of great stuff"))\n            .WithSprite(Properties.Resources.MyCustomItem)\n            // highlight-next-line\n            .WithUnlock(new ItemUnlock\n            {\n                UnlockCost = 10,\n                CharacterCreationCost = 5,\n                LoadoutCost = 4,\n            });\n    }\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"Or you can just initialize them directly (like in case of mutators):"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-csharp",children:'RogueLibs.CreateCustomUnlock(new MutatorUnlock("MyMutator"))\n    .WithName(new CustomNameInfo("Mutator Name"))\n    .WithDescription(new CustomNameInfo("Mutator Description"));\n'})})]})}function d(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1016:(e,t,n)=>{n.d(t,{Z:()=>s});n(7294);var o=n(5893);function s(e){let{children:t,...n}=e;return(0,o.jsx)("div",{role:"tabpanel",...n,children:t})}},5878:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(7294),s=n(6550),a=n(469),r=n(1980),l=n(7392),i=n(12);function u(e){return function(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:s}}=e;return{value:t,label:n,attributes:o,default:s}}))}function c(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??u(n);return function(e){const t=(0,l.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,r._X)(l),(0,o.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:s}=e,r=c(e),[l,u]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:r}))),[m,p]=h({queryString:n,groupId:s}),[f,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,a]=(0,i.Nk)(n);return[s,(0,o.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:s}),g=(()=>{const e=m??f;return d({value:e,tabValues:r})?e:null})();(0,a.Z)((()=>{g&&u(g)}),[g]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!d({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);u(e),p(e),b(e)}),[p,b,r]),tabValues:r}}var p=n(512);const f={tabItem:"tabItem_V91s",tabItemActive:"tabItemActive_JsUu",blink:"blink_ZPVS",tab:"tab_ntnM"};var b=n(5893);const g={left:37,right:39};function v(e){const{lazy:t,defaultValue:n,values:s,groupId:a}=e,r=o.Children.toArray(e.children),{tabValues:l,selectedValue:i,selectValue:u}=m({children:r,defaultValue:n,values:s,groupId:a}),c=[],d=e=>{const t=e.currentTarget,n=s[c.indexOf(t)].value;u(n),null!=a&&setTimeout((()=>{(function(e){const{top:t,left:n,bottom:o,right:s}=e.getBoundingClientRect(),{innerHeight:a,innerWidth:r}=window;return t>=0&&s<=r&&o<=a&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(f.tabItemActive),setTimeout((()=>t.classList.remove(f.tabItemActive)),2e3))}),150)},h=e=>{let t;switch(e.keyCode){case g.right:{const n=c.indexOf(e.target)+1;t=c[n]||c[0];break}case g.left:{const n=c.indexOf(e.target)-1;t=c[n]||c[c.length-1];break}default:return}t.focus()},v=(e,t)=>t.value===e||t.values&&-1!=t.values.indexOf(e);return(0,b.jsxs)("div",{className:"tabs-container",children:[(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:"tabs",children:s.map((e=>{let{value:t,label:n}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,className:(0,p.Z)("tabs__item",f.tabItem,{"tabs__item--active":i===t}),ref:e=>e&&c.push(e),onKeyDown:h,onFocus:d,onClick:d,children:n},t)}))}),t?o.cloneElement(r.find((e=>v(i,e.props))),{className:f.tab}):(0,b.jsx)("div",{children:r.map(((e,t)=>o.cloneElement(e,{key:t,hidden:!v(i,e.props),className:f.tab})))}),(0,b.jsx)("br",{})]})}},1151:(e,t,n)=>{n.d(t,{Z:()=>l,a:()=>r});var o=n(7294);const s={},a=o.createContext(s);function r(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);