"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1864],{8494:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var n=i(5893),s=i(1151),l=i(5878),a=i(1016);i(4996);const r={},o="Creating a Custom Ability",c={id:"dev/items/abilities/create-ability",title:"Creating a Custom Ability",description:"Special abilities in SoR are actually implemented as items. They have SetupDetails, Count, and exist in the owner's inventory, just like items. The CustomAbility class provided by RogueLibs inherits from the CustomItem class and provides a default implementation of SetupDetails. Just like with custom items, you can use interfaces to expand your ability's functionality: IAbilityRechargeable, IAbilityChargeable, IAbilityTargetable.",source:"@site/docs/dev/items/abilities/create-ability.mdx",sourceDirName:"dev/items/abilities",slug:"/dev/items/abilities/create-ability",permalink:"/RogueLibs/docs/dev/items/abilities/create-ability",draft:!1,unlisted:!1,editUrl:"https://github.com/Chasmical/RogueLibs/edit/main/website/docs/dev/items/abilities/create-ability.mdx",tags:[],version:"current",frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Inventory Checks",permalink:"/RogueLibs/docs/dev/items/inventory-checks"},next:{title:"Rechargeable Abilities",permalink:"/RogueLibs/docs/dev/items/abilities/rechargeable-abilities"}},u={},d=[{value:"<code>CustomAbility</code> class",id:"customability",level:2},{value:"<code>SetupDetails</code>",id:"setupdetails",level:3},{value:"Initialization",id:"initialization",level:2},{value:"Unlock Properties",id:"unlock-properties",level:2},{value:"Examples",id:"examples",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"creating-a-custom-ability",children:"Creating a Custom Ability"}),"\n",(0,n.jsxs)(t.p,{children:["Special abilities in SoR are actually implemented as items. They have ",(0,n.jsx)(t.code,{children:"SetupDetails"}),", ",(0,n.jsx)(t.code,{children:"Count"}),", and exist in the owner's inventory, just like items. The ",(0,n.jsx)(t.code,{children:"CustomAbility"})," class provided by RogueLibs inherits from the ",(0,n.jsx)(t.code,{children:"CustomItem"})," class and provides a default implementation of ",(0,n.jsx)(t.code,{children:"SetupDetails"}),". Just like with custom items, you can use interfaces to expand your ability's functionality: ",(0,n.jsx)(t.a,{href:"/RogueLibs/docs/dev/items/abilities/rechargeable-abilities",children:(0,n.jsx)(t.code,{children:"IAbilityRechargeable"})}),", ",(0,n.jsx)(t.a,{href:"/RogueLibs/docs/dev/items/abilities/chargeable-abilities",children:(0,n.jsx)(t.code,{children:"IAbilityChargeable"})}),", ",(0,n.jsx)(t.a,{href:"/RogueLibs/docs/dev/items/abilities/targetable-abilities",children:(0,n.jsx)(t.code,{children:"IAbilityTargetable"})}),"."]}),"\n","\n","\n",(0,n.jsxs)(t.h2,{id:"customability",children:[(0,n.jsx)(t.code,{children:"CustomAbility"})," class"]}),"\n",(0,n.jsxs)(t.p,{children:["To make a custom ability, you need to create a class deriving from ",(0,n.jsx)(t.code,{children:"CustomAbility"}),":"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomAbility.cs"',children:"// highlight-next-line\npublic class MyCustomAbility : CustomAbility\n{\n    /* ... */\n}\n"})}),"\n",(0,n.jsxs)(t.p,{children:["You only need to implement 2 methods: ",(0,n.jsx)(t.code,{children:"OnAdded"})," is called when a character receives this special ability, and ",(0,n.jsx)(t.code,{children:"OnPressed"})," is called when the player uses the ability. There's no ",(0,n.jsx)(t.code,{children:"OnRemoved"})," at the moment, because it's not implemented in SoR."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomAbility.cs"',children:"public class MyCustomAbility : CustomAbility\n{\n    // highlight-start\n    public override void OnAdded() { /* ... */ }\n    public override void OnPressed() { /* ... */ }\n    // highlight-end\n}\n"})}),"\n",(0,n.jsx)(t.h3,{id:"setupdetails",children:(0,n.jsx)(t.code,{children:"SetupDetails"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"SetupDetails"})," is overriden by ",(0,n.jsx)(t.code,{children:"CustomAbility"})," and here's its implementation:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",children:"    public override void SetupDetails()\n    {\n        Item.stackable = true;\n        Item.initCount = 0;\n        Item.lowCountThreshold = 100;\n    }\n"})}),"\n",(0,n.jsx)(t.p,{children:"This method should work for most abilities, but if you need something more sophisticated, then override it yourself."}),"\n",(0,n.jsx)(t.h2,{id:"initialization",children:"Initialization"}),"\n",(0,n.jsxs)(t.p,{children:["Just call the ",(0,n.jsx)(t.code,{children:"CreateCustomAbility"})," method with your ability's type as a parameter:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomAbility.cs"',children:"public class MyCustomAbility : CustomAbility\n{\n    [RLSetup]\n    public static void Setup()\n    {\n        // highlight-next-line\n        RogueLibs.CreateCustomAbility<MyCustomAbility>();\n    }\n}\n"})}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["See more about the ",(0,n.jsx)(t.code,{children:"RLSetup"})," attribute ",(0,n.jsx)(t.a,{href:"../../patching-utilities#rlsetup",children:"here"}),"."]})}),"\n",(0,n.jsxs)(t.p,{children:["You can set your ability's name and description using ",(0,n.jsx)(t.code,{children:"WithName"})," and ",(0,n.jsx)(t.code,{children:"WithDescription"})," methods:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomAbility.cs"',children:'public class MyCustomAbility : CustomAbility\n{\n    [RLSetup]\n    public static void Setup()\n    {\n        RogueLibs.CreateCustomAbility<MyCustomAbility>()\n            // highlight-start\n            .WithName(new CustomNameInfo("My Custom Ability"))\n            .WithDescription(new CustomNameInfo("My Custom Ability is very cool and does a lot of great stuff"));\n            // highlight-end\n    }\n}\n'})}),"\n",(0,n.jsx)(t.p,{children:"You can do the same with sprites and unlocks:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title="MyCustomAbility.cs"',children:'public class MyCustomAbility : CustomAbility\n{\n    [RLSetup]\n    public static void Setup()\n    {\n        RogueLibs.CreateCustomAbility<MyCustomAbility>()\n            .WithName(new CustomNameInfo("My Custom Ability"))\n            .WithDescription(new CustomNameInfo("My Custom Ability is very cool and does a lot of great stuff"));\n            // highlight-start\n            .WithSprite(Properties.Resources.MyCustomAbility)\n            .WithUnlock(new AbilityUnlock { UnlockCost = 10, CharacterCreationCost = 5 });\n            // highlight-end\n    }\n}\n'})}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["See ",(0,n.jsx)(t.a,{href:"../../names/custom-names",children:"Custom Names"}),", ",(0,n.jsx)(t.a,{href:"../../custom-sprites",children:"Custom Sprites"})," for more info."]})}),"\n",(0,n.jsx)(t.h2,{id:"unlock-properties",children:"Unlock Properties"}),"\n",(0,n.jsxs)(t.p,{children:["You can use the following properties when initializing ",(0,n.jsx)(t.code,{children:"AbilityUnlock"}),"s:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Property"}),(0,n.jsx)(t.th,{children:"Default"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"UnlockCost"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"0"})}),(0,n.jsx)(t.td,{children:"Unlock cost of the ability, in nuggets. If set to 0, it will unlock automatically, once all prerequisites are unlocked."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"CharacterCreationCost"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"1"})}),(0,n.jsx)(t.td,{children:"Cost of the ability in Character Creation, in points."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"IsAvailable"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"true"})}),(0,n.jsx)(t.td,{children:"Determines whether the ability is available in the ... Well, there's no menu for custom abilities at the moment, but if there was, this property would determine whether it's available in that menu."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"IsAvailableInCC"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"true"})}),(0,n.jsx)(t.td,{children:"Determines whether the ability is available in the Character Creation menu."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"Prerequisites"})}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Determines what unlocks must be unlocked in order to unlock this ability."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"Recommendations"})}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Just shows these unlocks in a separate Recommendations paragraph in the menus."})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["Other properties ",(0,n.jsx)(t.strong,{children:"should not"})," be used during initialization."]}),"\n",(0,n.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(l.Z,{defaultValue:"",values:[{label:"",value:""}],children:(0,n.jsx)(a.Z,{value:"",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",metastring:'title=""'})})})})]})}function m(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},1016:(e,t,i)=>{i.d(t,{Z:()=>s});i(7294);var n=i(5893);function s(e){let{children:t,...i}=e;return(0,n.jsx)("div",{role:"tabpanel",...i,children:t})}},5878:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(7294),s=i(6550),l=i(469),a=i(1980),r=i(7392),o=i(12);function c(e){return function(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:i,attributes:n,default:s}}=e;return{value:t,label:i,attributes:n,default:s}}))}function u(e){const{values:t,children:i}=e;return(0,n.useMemo)((()=>{const e=t??c(i);return function(e){const t=(0,r.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,i])}function d(e){let{value:t,tabValues:i}=e;return i.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:i}=e;const l=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:i}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:t,groupId:i});return[(0,a._X)(r),(0,n.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(l.location.search);t.set(r,e),l.replace({...l.location,search:t.toString()})}),[r,l])]}function m(e){const{defaultValue:t,queryString:i=!1,groupId:s}=e,a=u(e),[r,c]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=i.find((e=>e.default))??i[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:a}))),[m,b]=h({queryString:i,groupId:s}),[p,y]=function(e){let{groupId:t}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,l]=(0,o.Nk)(i);return[s,(0,n.useCallback)((e=>{i&&l.set(e)}),[i,l])]}({groupId:s}),x=(()=>{const e=m??p;return d({value:e,tabValues:a})?e:null})();(0,l.Z)((()=>{x&&c(x)}),[x]);return{selectedValue:r,selectValue:(0,n.useCallback)((e=>{if(!d({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);c(e),b(e),y(e)}),[b,y,a]),tabValues:a}}var b=i(512);const p={tabItem:"tabItem_V91s",tabItemActive:"tabItemActive_JsUu",blink:"blink_ZPVS",tab:"tab_ntnM"};var y=i(5893);const x={left:37,right:39};function j(e){const{lazy:t,defaultValue:i,values:s,groupId:l}=e,a=n.Children.toArray(e.children),{tabValues:r,selectedValue:o,selectValue:c}=m({children:a,defaultValue:i,values:s,groupId:l}),u=[],d=e=>{const t=e.currentTarget,i=s[u.indexOf(t)].value;c(i),null!=l&&setTimeout((()=>{(function(e){const{top:t,left:i,bottom:n,right:s}=e.getBoundingClientRect(),{innerHeight:l,innerWidth:a}=window;return t>=0&&s<=a&&n<=l&&i>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(p.tabItemActive),setTimeout((()=>t.classList.remove(p.tabItemActive)),2e3))}),150)},h=e=>{let t;switch(e.keyCode){case x.right:{const i=u.indexOf(e.target)+1;t=u[i]||u[0];break}case x.left:{const i=u.indexOf(e.target)-1;t=u[i]||u[u.length-1];break}default:return}t.focus()},j=(e,t)=>t.value===e||t.values&&-1!=t.values.indexOf(e);return(0,y.jsxs)("div",{className:"tabs-container",children:[(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:"tabs",children:s.map((e=>{let{value:t,label:i}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,className:(0,b.Z)("tabs__item",p.tabItem,{"tabs__item--active":o===t}),ref:e=>e&&u.push(e),onKeyDown:h,onFocus:d,onClick:d,children:i},t)}))}),t?n.cloneElement(a.find((e=>j(o,e.props))),{className:p.tab}):(0,y.jsx)("div",{children:a.map(((e,t)=>n.cloneElement(e,{key:t,hidden:!j(o,e.props),className:p.tab})))}),(0,y.jsx)("br",{})]})}},1151:(e,t,i)=>{i.d(t,{Z:()=>r,a:()=>a});var n=i(7294);const s={},l=n.createContext(s);function a(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);