"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8200],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>f});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(o),f=r,d=p["".concat(l,".").concat(f)]||p[f]||m[f]||a;return o?n.createElement(d,i(i({ref:t},u),{},{components:o})):n.createElement(d,i({ref:t},u))}));function f(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},1016:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(7462),r=o(7294);function a(e){let{children:t,...o}=e;return r.createElement("div",(0,n.Z)({role:"tabpanel"},o),t)}},250:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(7294),r=o(7094),a=o(6010);const i="tabItem_V91s",s="tabItemActive_JsUu",l="tab_ntnM";const c=37,u=39;function m(e){const{lazy:t,defaultValue:o,values:m,groupId:p}=e,{tabGroupChoices:f,setTabGroupChoices:d}=(0,r.U)(),[h,k]=(0,n.useState)(o),y=n.Children.toArray(e.children),I=[];if(null!=p){const e=f[p];null!=e&&e!==h&&m.some((t=>t.value===e))&&k(e)}const b=e=>{const t=e.currentTarget,o=I.indexOf(t),n=m[o].value;k(n),null!=p&&(d(p,n),setTimeout((()=>{(function(e){const{top:t,left:o,bottom:n,right:r}=e.getBoundingClientRect(),{innerHeight:a,innerWidth:i}=window;return t>=0&&r<=i&&n<=a&&o>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((()=>t.classList.remove(s)),2e3))}),150))},v=e=>{let t;switch(e.keyCode){case u:{const o=I.indexOf(e.target)+1;t=I[o]||I[0];break}case c:{const o=I.indexOf(e.target)-1;t=I[o]||I[I.length-1];break}default:return}t.focus()},g=(e,t)=>t.value===e||t.values&&-1!=t.values.indexOf(e);return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:"tabs"},m.map((e=>{let{value:t,label:o}=e;return n.createElement("li",{role:"tab",tabIndex:h===t?0:-1,"aria-selected":h===t,className:(0,a.Z)("tabs__item",i,{"tabs__item--active":h===t}),key:t,ref:e=>e&&I.push(e),onKeyDown:v,onFocus:b,onClick:b},o)}))),t?n.cloneElement(y.find((e=>g(h,e.props))),{className:l}):n.createElement("div",null,y.map(((e,t)=>n.cloneElement(e,{key:t,hidden:!g(h,e.props),className:l})))),n.createElement("br",null))}},3623:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=o(7462),r=(o(7294),o(3905));o(250),o(1016),o(4996);const a={},i="Hook Factories",s={unversionedId:"dev/hooks/hook-factories",id:"dev/hooks/hook-factories",title:"Hook Factories",description:"Hook factories are responsible for the creation of hooks. Custom content classes use hook factories internally, so there's basically no need for you to create your own. But, if you want to semi-automate the creation of a lot of different items/traits with slightly differing functionality, you can create a class, that will handle everything, and turn its parts on/off conditionally after initializing the hook.",source:"@site/docs/dev/hooks/hook-factories.mdx",sourceDirName:"dev/hooks",slug:"/dev/hooks/hook-factories",permalink:"/RogueLibs/docs/dev/hooks/hook-factories",draft:!1,editUrl:"https://github.com/SugarBarrel/RogueLibs/edit/main/website/docs/dev/hooks/hook-factories.mdx",tags:[],version:"current",frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Hooks",permalink:"/RogueLibs/docs/dev/hooks/"},next:{title:"Introduction",permalink:"/RogueLibs/docs/site/intro"}},l={},c=[{value:"<code>IHookFactory</code> interface",id:"ihookfactory",level:2},{value:"Initialization",id:"initialization",level:2},{value:"Examples",id:"examples",level:2}],u={toc:c};function m(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hook-factories"},"Hook Factories"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Hook factories")," are responsible for the creation of hooks. Custom content classes use hook factories internally, so there's basically no need for you to create your own. But, if you want to semi-automate the creation of a lot of different items/traits with slightly differing functionality, you can create a class, that will handle everything, and turn its parts on/off conditionally after initializing the hook."),(0,r.kt)("h2",{id:"ihookfactory"},(0,r.kt)("inlineCode",{parentName:"h2"},"IHookFactory")," interface"),(0,r.kt)("p",null,"You can create hook factories by deriving either from ",(0,r.kt)("inlineCode",{parentName:"p"},"IHookFactory<T>")," or from ",(0,r.kt)("inlineCode",{parentName:"p"},"HookFactoryBase<T>"),". The hook factory in the example below will attach a new ",(0,r.kt)("inlineCode",{parentName:"p"},"MyCustomHook"),' hook to all items that have a "Food" category:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="MyCustomHookFactory.cs"',title:'"MyCustomHookFactory.cs"'},'public class MyCustomHookFactory : HookFactoryBase<InvItem>\n{\n    public override bool TryCreate(InvItem instance, out IHook<InvItem> hook)\n    {\n        if (instance.Categories.Contains("Food"))\n        {\n            hook = new MyCustomHook();\n            return true;\n        }\n        hook = null;\n        return false;\n    }\n}\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"You only need to create a hook object. Don't attach it to the instance. That's the external code's responsibility."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"if (factory.TryCreate(item, out IHook<InvItem> hook))\n    item.AddHook(hook);\n"))),(0,r.kt)("h2",{id:"initialization"},"Initialization"),(0,r.kt)("p",null,"You can either implement your own way of using factories or add it to the RogueLibs' ",(0,r.kt)("inlineCode",{parentName:"p"},"RogueFramework")," class:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"RogueFramework.ItemFactories.Add(new MyCustomHookFactory());\n")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"RogueLibs uses ",(0,r.kt)("inlineCode",{parentName:"p"},"CustomItemFactory")," and other similar classes to initialize custom items and other hooks:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"public sealed class CustomItemFactory : HookFactoryBase<InvItem>\n{\n    private readonly Dictionary<string, ItemEntry> itemsDict = new Dictionary<string, ItemEntry>();\n    \n    public override bool TryCreate(InvItem instance, out IHook<InvItem> hook)\n    {\n        if (instance != null && itemsDict.TryGetValue(instance.invItemName, out ItemEntry entry))\n        {\n            hook = entry.Initializer();\n            if (hook is CustomItem custom)\n                custom.ItemInfo = entry.ItemInfo;\n            return true;\n        }\n        hook = null;\n        return false;\n    }\n    public ItemInfo AddItem<TItem>() where TItem : CustomItem, new()\n    {\n        ItemInfo info = ItemInfo.Get<TItem>();\n        itemsDict.Add(info.Name, new ItemEntry { Initializer = () => new TItem(), ItemInfo = info });\n        return info;\n    }\n\n    private struct ItemEntry\n    {\n        public Func<IHook<InvItem>> Initializer;\n        public ItemInfo ItemInfo;\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"public static void InvItem_SetupDetails(InvItem __instance)\n{\n    foreach (IHookFactory<InvItem> factory in RogueFramework.ItemFactories)\n        if (factory.TryCreate(__instance, out IHook<InvItem> hook))\n        {\n            __instance.AddHook(hook);\n        }\n}\n")))}m.isMDXComponent=!0}}]);