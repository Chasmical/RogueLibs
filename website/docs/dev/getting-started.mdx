# Getting Started (new!)

import Tabs from '@site/src/components/Tabs';
import TabItem from '@site/src/components/TabItem';
import useBaseUrl from '@docusaurus/useBaseUrl';

## Required software {#tools}

First of all, you'll need to install these tools:

- **[dnSpy](https://github.com/dnSpy/dnSpy/releases/latest)** - a .NET assembly editor (and a debugger, but it's way too tedious to make it work for BepInEx and plugins). You're not gonna edit assemblies, just view them to see how the game and/or other plugins work.

- **[Visual Studio 2019 Community](https://visualstudio.microsoft.com/downloads/)** - the Integrated Development Environment (IDE for short) that you'll be working in.

## New Way of Modding {#new-way-of-modding}

Instead of creating a project manually, we'll be using a **special template** with a ton of advantages!

- The template is SDK-style, which means that:
  - You'll be able to use most of the features of the latest C# versions!
  - Less messing around with the settings and configurations!
- No DLL Hell. All of the references are in a single designated folder!
- PluginBuildEvents utility will move your mods to BepInEx/plugins automatically!
- The template contains the base code to quickly start developing your mod!
- Most of the stuff you could possibly need is already in the template!

You can just copy-paste the template, and start working on your mod in less than a minute!

> *Before that template was created, you had to create a project and some folders, copy-paste dlls, add references, set up some settings, write the base code, then write some of your mod's content, then realize that you forgot to add a reference, then continue working on your mod, then again, you forgot to add something really fundamental and you have to rewrite the entire thing, and then when you almost got it to a stable release, you remember "that cool feature in C# 8.0 and later", start the project from scratch to try and add that feature, fail and then cry in your bed because you really need that feature and you can't imagine modding the game without it, and also because you scratched the entire project and you don't care enough to start over...* True story.

## Workspace Structure {#workspace-structure}

First of all, download the workspace template **here (WORK-IN-PROGRESS, I'll add the link tomorrow)** and extract the `sor-repos` folder.

:::tip Pro-tip: Managing repository directories
You should put your repositories close to the root of the drive, so that they have much shorter and more manageable paths, like `D:\sor-repos`, `F:\rim-repos` (for Rimworld mods), `E:\uni-repos` (for university stuff) and etc. This way you'll always know the exact path to your projects, and all errors and warnings regarding the files will be much shorter and will contain less unnecessary information.
:::

Now let's see what this workspace has to offer!

### `.ref` - References {#references}

`.ref` directory will contain all of the references for your mods. There are two kinds of them:

***Static references*** (that is, the ones that aren't updated frequently and mostly remain the same) are stored in the `static` subdirectory. Most of the stuff that you can find in the `/StreetsOfRogue_Data/Managed` directory goes here.

<img src={useBaseUrl('/img/setup/ref-static.png')} width='600'/>

***Dynamic references*** (the ones that change often) are `Assembly-CSharp.dll` (that contains the game code) and `RogueLibsCore.dll` (RogueLibs library). They are stored in the `.ref` directory itself, so you can update them more easily.

<img src={useBaseUrl('/img/setup/ref.png')} width='600'/>

:::tip Pro-tip: Documentation files
Some references have documentation as a separate file, like `RogueLibsCore.xml`. Make sure that you place it next to the .dll in the same folder. If you do, you'll be able to look up documentation on types and members right in Visual Studio!
:::

### `.events` - PluginBuildEvents {#pluginbuildevents}

PluginBuildEvents is a simple utility for copying your mods over to the BepInEx/plugins directory. The default project template includes it as a post-build event, so you just need to build your mod, and its file will be automatically moved!

:::note Non-Steam versions of the game
If you haven't purchased the Steam version of the game (or if you somehow messed up the Steam's installation path in the registry), then specify the full path to the game's root directory in the `Directory.Build.props` file of your project:
```xml
  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="&quot;$(SolutionDir)\..\.events\PluginBuildEvents.exe&quot; &quot;$(TargetPath)&quot; &quot;C:\GOG Games\Streets of Rogue&quot;" />
  </Target>
```
:::

### Solution Folders {#solution-folders}

All other folders should contain solutions with your projects:

<img src={useBaseUrl('/img/setup/solutions.png')} width='600'/>

To create a new one, just copy-paste the template one. You can also modify the template to fit your specific needs.
